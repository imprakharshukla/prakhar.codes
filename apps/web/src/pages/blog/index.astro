---
import BaseHead from "../../components/BaseHead.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";
import Layout from "../../layouts/layout.astro";
import PostFeed from "../../components/PostFeed";
import { getCollection } from "astro:content";

const blogPosts = await getCollection("blog");
const filteredBlogPosts = blogPosts
  .filter((post) =>
    import.meta.env.MODE === "production" ? post.data.publish === true : true
  )
  .sort(
    (a, b) =>
      new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime()
  );
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead
      title="Blog - Prakhar Shukla"
      description="Technical articles about full-stack development, AI/ML, DevOps, TypeScript, React, and software engineering. Tutorials on automation, CI/CD, and modern web development."
    />
  </head>
  <Layout>
    <div class="grid gap-4 md:max-w-2xl mt-6">
      <h1 class="h2-heading">Blog</h1>
      <div class="grid gap-3">
        <p class="description">
          Welcome to my blog! Here you'll find a collection of my thoughts and
          musings on a variety of topics. I hope you enjoy reading them as much
          as I enjoy writing them.
        </p>
      </div>
      <PostFeed searchEnabled numberOfPost={filteredBlogPosts.length} posts={filteredBlogPosts} client:load />
    </div>
  </Layout>
</html>
